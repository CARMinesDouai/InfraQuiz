Object subclass: #CodeExecutor	instanceVariableNames: 'code'	classVariableNames: ''	poolDictionaries: ''	category: 'InfraQuiz'!!CodeExecutor methodsFor: 'execution' stamp: 'MaxenceGodefert 5/6/2019 18:32'!evalCode	self subclassResponsibility.! !!CodeExecutor methodsFor: 'accessing' stamp: 'MaxenceGodefert 5/6/2019 18:28'!code: anObject	code := anObject! !!CodeExecutor methodsFor: 'accessing' stamp: 'MaxenceGodefert 5/6/2019 18:28'!code	^ code! !WAComponent subclass: #InfraQuiz	instanceVariableNames: 'result oldCode'	classVariableNames: ''	poolDictionaries: ''	category: 'InfraQuiz'!!InfraQuiz commentStamp: 'MaxenceGodefert 5/6/2019 18:20' prior: 0!InfraQuiz is (at the moment) an application that lets you run Pharo code from a web page and display the result of this execution.This application is made as part of a PDR and will eventually make a QUIZ where you can enter code to answer a question.Instance variables :	result: <ByteString>	result	- Result of the last run (Corresponds to the printIt)!!InfraQuiz methodsFor: 'accessing' stamp: 'LucFabresse 5/6/2019 11:15'!result: anObject	result := anObject! !!InfraQuiz methodsFor: 'accessing' stamp: 'MaxenceGodefert 5/6/2019 18:57'!oldCode: anObject	oldCode := anObject! !!InfraQuiz methodsFor: 'accessing' stamp: 'LucFabresse 5/6/2019 11:15'!result	^ result! !!InfraQuiz methodsFor: 'accessing' stamp: 'MaxenceGodefert 5/6/2019 19:16'!oldCode	oldCode ifNil: [ oldCode := '10  factorial' ].	^ oldCode! !!InfraQuiz methodsFor: 'actions' stamp: 'MaxenceGodefert 5/6/2019 19:26'!executeCode: code	self oldCode: code.	(PharoExecutor new:code) evalCode.	self result: ('out.txt' asFileReference readStream upToEnd).! !!InfraQuiz methodsFor: 'actions' stamp: 'MaxenceGodefert 5/6/2019 18:59'!resetResult	self result: nil.	self oldCode: nil.! !!InfraQuiz methodsFor: 'testing' stamp: 'LucFabresse 5/6/2019 11:12'!hasResult	^ self result notNil! !!InfraQuiz methodsFor: 'initialization' stamp: 'LucFabresse 5/6/2019 11:14'!initialize 	super initialize.	result := nil! !!InfraQuiz methodsFor: 'content' stamp: 'MaxenceGodefert 5/6/2019 19:16'!renderContentOn: htmlhtml tbsContainer	with: [ 	html heading level: 2; with: self class description.	html tbsForm: [		html tbsFormGroup: [ 			html label for: 'inputCode'; with: 'Your Code:'.			html textArea 				style: 'width: 60%; height: 200px';				callback: [ :code | self executeCode: code ];				tbsFormControl; 				id: 'exampleInputEmail1'; 				text: self oldCode.		].					html tbsSubmitButton 			bePrimary;			with: 'Execute'.		html space.		html tbsButton			beDefault;			callback: [ self resetResult ];			with: 'Reset'.	].		html div		class: 'spacer';		style: 'height: 50px'.		self hasResult ifTrue: [ 		html heading level:4; with: 'Output:'.		html textArea 			style: 'width: 60%; height: 200px';			text: self result	]]! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!InfraQuiz class	instanceVariableNames: ''!!InfraQuiz class methodsFor: 'acccessing' stamp: 'LucFabresse 5/6/2019 10:38'!description	^'Un site de quiz pour apprendre Ã  programmer'! !!InfraQuiz class methodsFor: 'acccessing' stamp: 'MaxenceGodefert 3/24/2019 14:08'!handlerName	^'InfraQuiz'! !!InfraQuiz class methodsFor: 'initialization' stamp: 'LucFabresse 5/6/2019 10:37'!canBeRoot	^true! !!InfraQuiz class methodsFor: 'initialization' stamp: 'MaxenceGodefert 4/30/2019 15:54'!initialize"self initialize"| app |app := WAAdmin register: self asApplicationAt: self handlerName.app addLibrary: JQDeploymentLibrary.app addLibrary: JQUiDeploymentLibrary.app addLibrary: TBSDeploymentLibrary.! !CodeExecutor subclass: #PharoExecutor	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'InfraQuiz'!!PharoExecutor methodsFor: 'execution' stamp: 'MaxenceGodefert 5/6/2019 19:28'!evalCode	OSProcess waitForCommand: './pharo Pharo.image eval ',code,'. > out.txt'.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!PharoExecutor class	instanceVariableNames: ''!!PharoExecutor class methodsFor: 'initialization' stamp: 'MaxenceGodefert 5/6/2019 18:30'!new:code	|executor|	executor := PharoExecutor new.	executor code:code.	^executor.! !InfraQuiz initialize!